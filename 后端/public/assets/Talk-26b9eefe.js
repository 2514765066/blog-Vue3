import{H as w}from"./Header-5cece443.js";import{a as T}from"./useTime-ba59bc9d.js";import{_ as y,y as D,i as _,x as F,a as I,r as C,j as $,d as n,e as l,g as j,f as t,l as B,q as E,z as f,t as L,F as g,m as N,$ as r,p as R,h as V}from"./index-32c2b363.js";import{n as h}from"./index.browser-7e542916.js";import"./Waves-18e36e27.js";const m=i=>(R("data-v-33d136f5"),i=i(),V(),i),H={class:"v-c-n",id:"talkEdit"},U={class:"h shadow"},q=m(()=>t("nav",{class:"v-c-c"},[t("span",{class:"fs-15"},"写说说")],-1)),z={class:"v-sb-n"},M={class:"fs-14 v-c-c mr-1"},O={class:"d-f"},P=["src"],A=m(()=>t("i",{class:"fa-regular fa-image"},null,-1)),G=m(()=>t("br",null,null,-1)),J={__name:"Talk",setup(i){const d=D(),u=_(),c=_(),v=F(),k=I(),e=C({id:h(),text:"",time:T(),msg:[],like:[],img:[]});function x(a){if(e.img.length==9){r.emit("tipShow",{title:"上传图片数量不能超过9",type:!1});return}e.img.push({file:a.target.files[0],name:h()+".png"})}function b(a){if(a)return window.URL.createObjectURL(a)}function S(){if(c.value.innerText.trim()==""){r.emit("tipShow",{title:"内容不能为空!!"});return}const s=new FormData;e.img.forEach(o=>{s.append("images",o.file,o.name)}),k.postImage(s),e.text=c.value.textContent,v.postData(e)&&(r.emit("tipShow",{title:"发布成功"}),d.back())}return(a,s)=>{const p=$("media");return n(),l(g,null,[j(w,{title:"说说发布"}),t("main",H,[t("section",U,[q,t("article",z,[t("div",null,[t("button",{onClick:S,class:"mr-2"},"发布"),t("button",{onClick:s[0]||(s[0]=o=>B(d).back())},"取消")]),E((n(),l("span",M,[f(L(e.time),1)])),[[p,480]])]),t("article",{class:"fs-16",contenteditable:"","data-placeholder":"发生什么趣事了？？？",ref_key:"talk",ref:c},null,512),t("div",O,[(n(!0),l(g,null,N(e.img,o=>(n(),l("img",{src:b(o.file),class:"c-img mr-1 mb-1"},null,8,P))),256)),t("button",{onClick:s[1]||(s[1]=o=>u.value.click())},[A,G,f("图片")]),t("input",{type:"file",ref_key:"changeFile",ref:u,accept:"image/jpeg, image/png",onChange:x},null,544)])])])],64)}}},Z=y(J,[["__scopeId","data-v-33d136f5"]]);export{Z as default};
